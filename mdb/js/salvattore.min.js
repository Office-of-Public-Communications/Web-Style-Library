!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.salvattore=t()}(this,function(){return window.matchMedia||(window.matchMedia=function(){"use strict";var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],r=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),r="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===r.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(){"use strict";if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var e=window.matchMedia,t=e("only all").matches,n=!1,r=0,a=[],i=function(t){clearTimeout(r),r=setTimeout(function(){for(var t=0,n=a.length;t<n;t++){var r=a[t].mql,i=a[t].listeners||[],o=e(r.media).matches;if(o!==r.matches){r.matches=o;for(var c=0,l=i.length;c<l;c++)i[c].call(window,r)}}},30)};window.matchMedia=function(r){var o=e(r),c=[],l=0;return o.addListener=function(e){t&&(n||(n=!0,window.addEventListener("resize",i,!0)),0===l&&(l=a.push({mql:o,listeners:c})),c.push(e))},o.removeListener=function(e){for(var t=0,n=c.length;t<n;t++)c[t]===e&&c.splice(t,1)},o}}(),function(){"use strict";for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),a=Math.max(0,16-(r-e)),i=window.setTimeout(function(){t(r+a)},a);return e=r+a,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),"function"!=typeof window.CustomEvent&&function(){"use strict";function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(e,t,n){"use strict";var r={},a=[],i=[],o=[],c=function(e,t,n){e.dataset?e.dataset[t]=n:e.setAttribute("data-"+t,n)};return r.obtainGridSettings=function t(n){var r=e.getComputedStyle(n,":before"),a=r.getPropertyValue("content").slice(1,-1),i=a.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/),o=1,c=[];return i?(o=i[1],c=i[2],c=c?c.split("."):["column"]):(i=a.match(/^\s*\.(.+)\s+(\d+)\s*$/))&&(c=i[1],(o=i[2])&&(o=o.split("."))),{numberOfColumns:o,columnClasses:c}},r.addColumns=function e(n,a){for(var i=r.obtainGridSettings(n),o=i.numberOfColumns,l=i.columnClasses,s=new Array(+o),u=t.createDocumentFragment(),d=o,m;0!=d--;)m="[data-columns] > *:nth-child("+o+"n-"+d+")",s.push(a.querySelectorAll(m));s.forEach(function e(n){var r=t.createElement("div"),a=t.createDocumentFragment();r.className=l.join(" "),Array.prototype.forEach.call(n,function e(t){a.appendChild(t)}),r.appendChild(a),u.appendChild(r)}),n.appendChild(u),c(n,"columns",o)},r.removeColumns=function n(r){var a=t.createRange();a.selectNodeContents(r);var i=Array.prototype.filter.call(a.extractContents().childNodes,function t(n){return n instanceof e.HTMLElement}),o=i.length,l=i[0].childNodes.length,s=new Array(l*o);Array.prototype.forEach.call(i,function e(t,n){Array.prototype.forEach.call(t.children,function e(t,r){s[r*o+n]=t})});var u=t.createElement("div");return c(u,"columns",0),s.filter(function e(t){return!!t}).forEach(function e(t){u.appendChild(t)}),u},r.recreateColumns=function t(n){e.requestAnimationFrame(function e(){r.addColumns(n,r.removeColumns(n));var t=new CustomEvent("columnsChange");n.dispatchEvent(t)})},r.mediaQueryChange=function e(t){t.matches&&Array.prototype.forEach.call(a,r.recreateColumns)},r.getCSSRules=function e(t){var n;try{n=t.sheet.cssRules||t.sheet.rules}catch(e){return[]}return n||[]},r.getStylesheets=function e(){var n=Array.prototype.slice.call(t.querySelectorAll("style"));return n.forEach(function(e,t){"text/css"!==e.type&&""!==e.type&&n.splice(t,1)}),Array.prototype.concat.call(n,Array.prototype.slice.call(t.querySelectorAll("link[rel='stylesheet']")))},r.mediaRuleHasColumnsSelector=function e(t){var n,r;try{n=t.length}catch(e){n=0}for(;n--;)if(r=t[n],r.selectorText&&r.selectorText.match(/\[data-columns\](.*)::?before$/))return!0;return!1},r.scanMediaQueries=function t(){var n=[];if(e.matchMedia){r.getStylesheets().forEach(function e(t){Array.prototype.forEach.call(r.getCSSRules(t),function e(t){try{t.media&&t.cssRules&&r.mediaRuleHasColumnsSelector(t.cssRules)&&n.push(t)}catch(e){}})});var a=i.filter(function(e){return-1===n.indexOf(e)});o.filter(function(e){return-1!==a.indexOf(e.rule)}).forEach(function(e){e.mql.removeListener(r.mediaQueryChange)}),o=o.filter(function(e){return-1===a.indexOf(e.rule)}),n.filter(function(e){return-1==i.indexOf(e)}).forEach(function(t){var n=e.matchMedia(t.media.mediaText);n.addListener(r.mediaQueryChange),o.push({rule:t,mql:n})}),i.length=0,i=n}},r.rescanMediaQueries=function e(){r.scanMediaQueries(),Array.prototype.forEach.call(a,r.recreateColumns)},r.nextElementColumnIndex=function e(t,n){var r=t.children,a=r.length,i=0,o,c,l,s=0;for(l=0;l<a;l++)o=r[l],c=o.children.length+(n[l].children||n[l].childNodes).length,0===i&&(i=c),c<i&&(s=l,i=c);return s},r.createFragmentsList=function e(n){for(var r=new Array(n),a=0;a!==n;)r[a]=t.createDocumentFragment(),a++;return r},r.appendElements=function e(t,n){var a=t.children,i=a.length,o=r.createFragmentsList(i);Array.prototype.forEach.call(n,function e(n){var a=r.nextElementColumnIndex(t,o);o[a].appendChild(n)}),Array.prototype.forEach.call(a,function e(t,n){t.appendChild(o[n])})},r.prependElements=function e(n,a){var i=n.children,o=i.length,c=r.createFragmentsList(o),l=o-1;a.forEach(function e(t){var n=c[l];n.insertBefore(t,n.firstChild),0===l?l=o-1:l--}),Array.prototype.forEach.call(i,function e(t,n){t.insertBefore(c[n],t.firstChild)});for(var s=t.createDocumentFragment(),u=a.length%o;0!=u--;)s.appendChild(n.lastChild);n.insertBefore(s,n.firstChild)},r.registerGrid=function n(i){if("none"!==e.getComputedStyle(i).display){var o=t.createRange();o.selectNodeContents(i);var l=t.createElement("div");l.appendChild(o.extractContents()),c(l,"columns",0),r.addColumns(i,l),a.push(i)}},r.init=function e(){var n=t.createElement("style");n.innerHTML="[data-columns]::before{display:block;visibility:hidden;position:absolute;font-size:1px;}",t.head.appendChild(n);var a=t.querySelectorAll("[data-columns]");Array.prototype.forEach.call(a,r.registerGrid),r.scanMediaQueries()},r.init(),{appendElements:r.appendElements,prependElements:r.prependElements,registerGrid:r.registerGrid,recreateColumns:r.recreateColumns,rescanMediaQueries:r.rescanMediaQueries,init:r.init,append_elements:r.appendElements,prepend_elements:r.prependElements,register_grid:r.registerGrid,recreate_columns:r.recreateColumns,rescan_media_queries:r.rescanMediaQueries}}(window,window.document)});